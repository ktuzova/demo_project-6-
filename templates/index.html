<!-- templates/index.html -->
{% extends "base.html" %}

{% block title %}Главная - Образовательная платформа{% endblock %}

{% block content %}
<!-- Форма регистрации -->
<div class="card mb-4" style="max-width: 400px;">
  <div class="card-header">Регистрация</div>
  <div class="card-body">
    <form id="registerForm">
      <div class="mb-3">
        <input type="text" class="form-control" name="name" placeholder="Имя" required>
      </div>
      <div class="mb-3">
        <input type="email" class="form-control" name="email" placeholder="Email" required>
      </div>
      <div class="mb-3">
        <select class="form-select" name="role" required>
          <option value="student">Студент</option>
          <option value="teacher">Преподаватель</option>
        </select>
      </div>
      <div class="mb-3">
        <input type="password" class="form-control" name="password" placeholder="Пароль" required>
      </div>
      <button type="submit" class="btn btn-success w-100">Зарегистрироваться</button>
      <div id="registerMsg" class="mt-2 text-danger"></div>
    </form>
  </div>
</div>

<!-- Форма входа -->
<div class="card mb-4" style="max-width: 400px;">
  <div class="card-header">Вход</div>
  <div class="card-body">
    <form id="loginForm">
      <div class="mb-3">
        <input type="email" class="form-control" name="email" placeholder="Email" required>
      </div>
      <div class="mb-3">
        <input type="password" class="form-control" name="password" placeholder="Пароль" required>
      </div>
      <button type="submit" class="btn btn-primary w-100">Войти</button>
      <div id="loginMsg" class="mt-2 text-danger"></div>
    </form>
  </div>
</div>

<div class="row">
    <div class="col-lg-8">
        <div class="hero-section bg-gradient p-5 rounded mb-4 text-white">
            <h1 class="display-4 fw-bold mb-3">Добро пожаловать в EduPlatform</h1>
            <p class="lead">Современная образовательная платформа для изучения новых навыков и развития профессиональных компетенций.</p>
            <button class="btn btn-light btn-lg" onclick="showAuthModal()">
                <i class="bi bi-play-circle me-2"></i>Начать обучение
            </button>
        </div>

        <div class="row" id="featuredCourses">
            <div class="col-12">
                <h3 class="mb-3">Популярные курсы</h3>
                <div class="row" id="coursesContainer">
                    <!-- Courses will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <div class="card">
            <div class="card-header bg-primary text-white">
                <h5 class="mb-0"><i class="bi bi-graph-up me-2"></i>Статистика платформы</h5>
            </div>
            <div class="card-body">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span>Активных курсов</span>
                    <span class="badge bg-primary" id="totalCourses">-</span>
                </div>
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <span>Зарегистрированных пользователей</span>
                    <span class="badge bg-success" id="totalUsers">-</span>
                </div>
                <div class="d-flex justify-content-between align-items-center">
                    <span>Материалов</span>
                    <span class="badge bg-info" id="totalMaterials">-</span>
                </div>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header bg-success text-white">
                <h5 class="mb-0"><i class="bi bi-award me-2"></i>Категории курсов</h5>
            </div>
            <div class="card-body">
                <div class="list-group list-group-flush" id="categoriesList">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    loadFeaturedCourses();
    loadStatistics();
});
</script>
{% endblock %}

<!-- Если шаблон не расширяет base.html, выводим простое приветствие -->
{% if not self.extends %}
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Главная страница</title>
</head>
<body>
    <h1>Добро пожаловать!</h1>
    <p>Это ваша образовательная платформа.</p>
</body>
</html>
{% endif %}
